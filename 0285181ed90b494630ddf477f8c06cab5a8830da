{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "96ace2e1_8b90667e",
        "filename": "src/main/java/com/gerritforge/gerrit/plugins/multisite/forwarder/CacheKeyJsonParser.java",
        "patchSetId": 25
      },
      "lineNbr": 42,
      "author": {
        "id": 1020677
      },
      "writtenOn": "2026-01-25T11:46:12Z",
      "side": 1,
      "message": "This can be removed",
      "range": {
        "startLine": 42,
        "startChar": 0,
        "endLine": 42,
        "endChar": 27
      },
      "revId": "0285181ed90b494630ddf477f8c06cab5a8830da",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c2222d98_6110fc1b",
        "filename": "src/main/java/com/gerritforge/gerrit/plugins/multisite/forwarder/CacheKeyJsonParser.java",
        "patchSetId": 25
      },
      "lineNbr": 42,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2026-01-25T12:29:37Z",
      "side": 1,
      "message": "Yeah, that should have been spotted and fixed, rather than just suppressed.",
      "parentUuid": "96ace2e1_8b90667e",
      "range": {
        "startLine": 42,
        "startChar": 0,
        "endLine": 42,
        "endChar": 27
      },
      "revId": "0285181ed90b494630ddf477f8c06cab5a8830da",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "134f8303_db159e7a",
        "filename": "src/main/java/com/gerritforge/gerrit/plugins/multisite/forwarder/CacheKeyJsonParser.java",
        "patchSetId": 25
      },
      "lineNbr": 42,
      "author": {
        "id": 1020677
      },
      "writtenOn": "2026-01-25T18:54:49Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "c2222d98_6110fc1b",
      "range": {
        "startLine": 42,
        "startChar": 0,
        "endLine": 42,
        "endChar": 27
      },
      "revId": "0285181ed90b494630ddf477f8c06cab5a8830da",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7a489388_2d38627c",
        "filename": "src/main/java/com/gerritforge/gerrit/plugins/multisite/forwarder/CacheKeyJsonParser.java",
        "patchSetId": 25
      },
      "lineNbr": 43,
      "author": {
        "id": 1020677
      },
      "writtenOn": "2026-01-25T11:50:10Z",
      "side": 1,
      "message": "Why not pass an instance of cacheEntry?",
      "range": {
        "startLine": 43,
        "startChar": 21,
        "endLine": 43,
        "endChar": 47
      },
      "revId": "0285181ed90b494630ddf477f8c06cab5a8830da",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2e8108a9_e15faf80",
        "filename": "src/main/java/com/gerritforge/gerrit/plugins/multisite/forwarder/CacheKeyJsonParser.java",
        "patchSetId": 25
      },
      "lineNbr": 43,
      "author": {
        "id": 1020677
      },
      "writtenOn": "2026-01-25T12:06:37Z",
      "side": 1,
      "message": "Well... coz you need the result of the parser to instantiate that... maybe we should have a separate data type for that plugin name and cache name",
      "parentUuid": "7a489388_2d38627c",
      "range": {
        "startLine": 43,
        "startChar": 21,
        "endLine": 43,
        "endChar": 47
      },
      "revId": "0285181ed90b494630ddf477f8c06cab5a8830da",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "0c6bfca4_b3c156d2",
        "filename": "src/main/java/com/gerritforge/gerrit/plugins/multisite/forwarder/CacheKeyJsonParser.java",
        "patchSetId": 25
      },
      "lineNbr": 43,
      "author": {
        "id": 1020677
      },
      "writtenOn": "2026-01-25T18:54:49Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "2e8108a9_e15faf80",
      "range": {
        "startLine": 43,
        "startChar": 21,
        "endLine": 43,
        "endChar": 47
      },
      "revId": "0285181ed90b494630ddf477f8c06cab5a8830da",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "755d7816_f43829b8",
        "filename": "src/main/java/com/gerritforge/gerrit/plugins/multisite/forwarder/CacheKeyJsonParser.java",
        "patchSetId": 25
      },
      "lineNbr": 74,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2026-01-25T10:27:36Z",
      "side": 1,
      "message": "If `cls` is an abstract class (or interface), this will fail with:\n\n```\n[2026-01-25T08:53:07.596Z] [kafka-subscriber-4[com.gerritforge.gerrit.plugins.kafka.subscribe.KafkaEventNativeSubscriber$ReceiverJob@4cc6aee5]] ERROR com.gerritforge.gerrit.plugins.kafka.subscribe.KafkaEventNativeSubscriber : Malformed event \u0027{\"cacheName\":\"permission_sort\",\"key\":{\"ref\":\"refs/heads/\",\"patterns\":[\"refs/heads/*\",\"refs/*\"]},\"type\":\"cache-eviction\",\"eventCreatedOn\":1769331187,\"instanceId\":\"instance-1\"}\u0027: [Exception: com.google.gson.JsonIOException: Abstract classes can\u0027t be instantiated! Adjust the R8 configuration or register an InstanceCreator or a TypeAdapter for this type. Class name: com.google.gerrit.server.permissions.SectionSortCache$EntryKey\nSee https://github.com/google/gson/blob/main/Troubleshooting.md#r8-abstract-class]\ncom.google.gson.JsonIOException: Abstract classes can\u0027t be instantiated! Adjust the R8 configuration or register an InstanceCreator or a TypeAdapter for this type. Class name: com.google.gerrit.server.permissions.SectionSortCache$EntryKey\nSee https://github.com/google/gson/blob/main/Troubleshooting.md#r8-abstract-class\n        at com.google.gson.internal.ConstructorConstructor.lambda$get$2(ConstructorConstructor.java:141)\n        at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$FieldReflectionAdapter.createAccumulator(ReflectiveTypeAdapterFactory.java:552)\n        at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$Adapter.read(ReflectiveTypeAdapterFactory.java:505)\n        at com.google.gson.Gson.fromJson(Gson.java:1361)\n        at com.google.gson.Gson.fromJson(Gson.java:1463)\n        at com.google.gson.Gson.fromJson(Gson.java:1406)\n        at com.gerritforge.gerrit.plugins.multisite.forwarder.CacheKeyJsonParser.from(CacheKeyJsonParser.java:74)\n```",
      "range": {
        "startLine": 74,
        "startChar": 20,
        "endLine": 74,
        "endChar": 66
      },
      "revId": "0285181ed90b494630ddf477f8c06cab5a8830da",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1feea0fb_e7aee83e",
        "filename": "src/main/java/com/gerritforge/gerrit/plugins/multisite/forwarder/CacheKeyJsonParser.java",
        "patchSetId": 25
      },
      "lineNbr": 74,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2026-01-25T10:42:00Z",
      "side": 1,
      "message": "Maybe we can detect the situation, show something meaningful (e.g. _\"The key type for cache XYZ is an abstract class (/interface), please register a type adapter or serializer\"_).\n\nWe should introduce the possibility to register additional type adapters or serializers to the `EventGsonProvider` though, we don\u0027t have that yet in Gerrit core.\n\nImagine plugin XYZ defines a new interface `MyComplexInterface` and an implementation `MyComplexKey`: how can we get this to be serialized? Gerrit core doesn\u0027t know about the type or the class, so we won\u0027t be able to adapt `EventGsonProvider` for that.",
      "parentUuid": "755d7816_f43829b8",
      "range": {
        "startLine": 74,
        "startChar": 20,
        "endLine": 74,
        "endChar": 66
      },
      "revId": "0285181ed90b494630ddf477f8c06cab5a8830da",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5d2173a0_5ec952a8",
        "filename": "src/test/java/com/gerritforge/gerrit/plugins/multisite/forwarder/CacheKeyJsonParserTest.java",
        "patchSetId": 25
      },
      "lineNbr": 134,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2026-01-25T00:14:48Z",
      "side": 1,
      "message": "Maybe would be best to have this test class extracted out, so that can be reused across tests.",
      "revId": "0285181ed90b494630ddf477f8c06cab5a8830da",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e829f0f2_d874e345",
        "filename": "src/test/java/com/gerritforge/gerrit/plugins/multisite/forwarder/CacheKeyJsonParserTest.java",
        "patchSetId": 25
      },
      "lineNbr": 134,
      "author": {
        "id": 1020677
      },
      "writtenOn": "2026-01-25T15:16:35Z",
      "side": 1,
      "message": "I\u0027m afraid this requires a small refactor of the BUILD file! ðŸ¤¦\nHappy to triple check tomorrow. In that case it should be a different change.",
      "parentUuid": "5d2173a0_5ec952a8",
      "revId": "0285181ed90b494630ddf477f8c06cab5a8830da",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    }
  ]
}