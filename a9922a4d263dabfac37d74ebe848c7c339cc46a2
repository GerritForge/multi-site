{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "1fe63dbe_b0dcc492",
        "filename": "src/main/java/com/gerritforge/gerrit/plugins/multisite/forwarder/CacheKeyJsonParser.java",
        "patchSetId": 4
      },
      "lineNbr": 46,
      "author": {
        "id": 1020677
      },
      "writtenOn": "2026-01-26T17:18:35Z",
      "side": 0,
      "message": "This statement needs to go as its now causing a regression, as we\u0027re serialising accounts cache with its own serialiser, trying to parse it as plain json will fail.",
      "range": {
        "startLine": 44,
        "startChar": 5,
        "endLine": 46,
        "endChar": 14
      },
      "revId": "a9922a4d263dabfac37d74ebe848c7c339cc46a2",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3be75917_e76a7a13",
        "filename": "src/main/java/com/gerritforge/gerrit/plugins/multisite/forwarder/CacheKeyJsonParser.java",
        "patchSetId": 4
      },
      "lineNbr": 46,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2026-01-27T21:44:50Z",
      "side": 0,
      "message": "We need preserve backward compatibility, therefore the `accounts` cache, even if it is persistent and has its own serialiser, should still be serialised in the _old way_, unfortunately :-(",
      "parentUuid": "1fe63dbe_b0dcc492",
      "range": {
        "startLine": 44,
        "startChar": 5,
        "endLine": 46,
        "endChar": 14
      },
      "revId": "a9922a4d263dabfac37d74ebe848c7c339cc46a2",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8fdaee51_10de81ff",
        "filename": "src/main/java/com/gerritforge/gerrit/plugins/multisite/forwarder/CacheKeyJsonParser.java",
        "patchSetId": 4
      },
      "lineNbr": 46,
      "author": {
        "id": 1020677
      },
      "writtenOn": "2026-01-28T10:14:50Z",
      "side": 0,
      "message": "Good point about backwards compatibility, however, rather than serialising the old way I think we should try to deserialise in the new way and fall back to the old one if it that fails.\n\nIn future versions of Gerrit we can then remove the fallback.",
      "parentUuid": "3be75917_e76a7a13",
      "range": {
        "startLine": 44,
        "startChar": 5,
        "endLine": 46,
        "endChar": 14
      },
      "revId": "a9922a4d263dabfac37d74ebe848c7c339cc46a2",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "91a3cdd9_16060644",
        "filename": "src/main/java/com/gerritforge/gerrit/plugins/multisite/forwarder/CacheKeyJsonParser.java",
        "patchSetId": 4
      },
      "lineNbr": 46,
      "author": {
        "id": 1020677
      },
      "writtenOn": "2026-01-28T10:37:46Z",
      "side": 0,
      "message": "Done",
      "parentUuid": "8fdaee51_10de81ff",
      "range": {
        "startLine": 44,
        "startChar": 5,
        "endLine": 46,
        "endChar": 14
      },
      "revId": "a9922a4d263dabfac37d74ebe848c7c339cc46a2",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "1909132e_807381ed",
        "filename": "src/main/java/com/gerritforge/gerrit/plugins/multisite/forwarder/CacheKeyJsonParser.java",
        "patchSetId": 4
      },
      "lineNbr": 46,
      "author": {
        "id": 1020677
      },
      "writtenOn": "2026-01-28T15:49:15Z",
      "side": 0,
      "message": "Turns out it wasn\u0027t a good point about backwards compatibility, as serialization for this cache has always been broken and eviction for this has never worked.\n\nThis change actually fixes the serialization of this cache, but it was decided to split out removal of the case statement to make each change more focused.",
      "parentUuid": "91a3cdd9_16060644",
      "range": {
        "startLine": 44,
        "startChar": 5,
        "endLine": 46,
        "endChar": 14
      },
      "revId": "a9922a4d263dabfac37d74ebe848c7c339cc46a2",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    }
  ]
}